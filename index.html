<!DOCTYPE html>
<html lang="en">

<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta http-equiv="X-UA-Compatible" content="ie=edge">
     <link rel="stylesheet" href="plugin/codemirror/lib/codemirror.css">
     <link rel="stylesheet" href="plugin/codemirror/theme/icecoder.css">
     <link rel="stylesheet" href="plugin/codemirror/addon/hint/show-hint.css">
     <!-- Compiled and minified CSS -->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

     <!-- Compiled and minified JavaScript -->

     <link rel="stylesheet" href="css/style.css">
     <title>AsanCompiler</title>
</head>

<body>

     <!-- Modal Structure -->
     <div id="modal1" class="modal">
          <div class="modal-content">
               <h4>Upload a script</h4>
               <br>
               <form action="#">
                    <div class="file-field input-field">
                         <div class="btn">
                              <span>File</span>
                              <input type="file" accept='text/plain' onchange='openFile(event)'>
                         </div>
                         <div class="file-path-wrapper">
                              <input class="file-path validate" type="text">
                         </div>
                    </div>
               </form>
          </div>
          <div class="modal-footer">
               <a href="#!" class="modal-close waves-effect waves-green btn-flat" onclick="print()">Run</a>
               <a href="#!" class="modal-close waves-effect waves-green btn-flat">Cancel</a>
          </div>
     </div>

     <div class="navbar-fixed">
          <nav class="black">
               <div class=" smaller">
                    <a href="#!" class="brand-logo">AsanScript</a>
                    <!-- <ul class="right down">
                         <div class="submit">
                              <p>Upload</p>
                              <input type='file' accept='text/plain' onchange='openFile(event)'>
                         </div>
                         <p class="playButton" onclick="takeInput()">
                              <img src="images/play.svg" alt="">
                         </p>
                    </ul> -->

                    <div class="button-cont">
                         <a href="#" id="downloadLink" class="play">
                              <img src="images/printer.svg" alt="">
                         </a>
                         <!-- Modal Trigger -->
                         <a class="modal-trigger play" href="#modal1">
                              <img src="images/upload.svg" alt="">
                         </a>

                         <button class="play" id="play" type="submit" value="Play" onclick="print()">
                              <img src="images/play.svg" alt="">
                         </button>
                         <!-- <input class="play" id="play" type="submit" value="Play" onclick="print()"> -->

                    </div>

               </div>
          </nav>
     </div>
     <div class="textarea">
          <textarea class="codemirror-textarea" id="input"></textarea>
     </div>
     <!-- <textarea id="input" cols="60" rows="20"></textarea> -->

     <div class="row">
          <div class="col s12 row-tabs">
               <ul class="tabs">
                    <li class="tab"><a href="#test1">Lexical</a></li>
                    <li class="tab"><a href="#test2">Syntax</a></li>
                    <li class="tab"><a href="#test3">Semantic</a></li>
                    <li class="tab"><a class="active" href="#test4">ICG</a></li>
               </ul>
          </div>

     </div>
     <div class="extra"></div>
     <div id="test1" class="col s12 code"></div>
     <div id="test2" class="col s12 code"></div>
     <div id="test3" class="col s12 code"></div>
     <div id="test4" class="col s12 code"></div>



     <!-- <script>
          var wage = document.getElementById("play");
          wage.onkeyup = function (e) {
               if (e.keyCode === 16) {  
                    validate(e);
                   
               }
          };

          function validate(e) {
               var text = e.target.value;
          }
     </script> -->


     <script type="text/javascript" src="js/jquery.min.js"></script>

     <script>
          function downloadInnerHtml(filename, elId) {
               var elHtml = document.getElementById(elId).innerHTML;
               console.log(elHtml);
               elHtml = elHtml.replace(/<br>/g,'\n');
               elHtml = elHtml.replace(/<sub>/g,'');
               elHtml = elHtml.replace(/<\/sub>/g,'');
               console.log(elHtml);
               var link = document.createElement('a'); 
               mimeType = 'text/plain';

               link.setAttribute('download', filename);
               link.setAttribute('href', 'data:' + mimeType + ';charset=utf-8,' + encodeURIComponent(elHtml));
               link.click();
          }

          var fileName = 'ICG.txt'; // You can use the .txt extension if you want

          $('#downloadLink').click(function () {
               downloadInnerHtml(fileName, 'test4', 'text/html');
          });
     </script>

     <script type="text/javascript" src="plugin/codemirror/lib/codemirror.js"></script>
     <script type="text/javascript" src="js/default.js"></script>
     <script src="plugin/codemirror/addon/hint/javascript-hint.js"></script>
     <script src="plugin/codemirror/addon/hint/show-hint.js"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
     <script type="module/javascript" src="./js/app1.js"></script>

     <script>
          M.AutoInit();
     </script>

     <script>
          // console.log("key press script")
          // $("#play").keypress(function (event) {
          //      if (event.which == 13) {
          //           alert("You pressed enter");
          //           validate();

          //      }
          // });



          // $(document).keypress(function (event) {
          //      if (event.keyCode == 13) {
          //           $('#play').click();    
          //      }
          // });


     </script>
</body>

</html>